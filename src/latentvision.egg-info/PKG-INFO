Metadata-Version: 2.4
Name: latentvision
Version: 0.1.0
Summary: Tools for visualizing and interpreting visual embeddings
Author: Yuan Li
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: torch
Requires-Dist: timm
Requires-Dist: numpy
Requires-Dist: matplotlib
Requires-Dist: plotly
Requires-Dist: umap-learn
Requires-Dist: scikit-learn
Requires-Dist: streamlit
Dynamic: license-file

# ExpandColor — Vision Transformer Gamut Expansion (非人类色彩空间)

> RGB → ViT latent (N-d) → 聚类/投影 → 人眼可视化（“翻译后的外星色”）

## Features
- ViT encoder via `timm` (or `torchvision` fallback) → patch embeddings
- KMeans to invent **AI color families**
- PCA/UMAP to project high-dim latent → display RGB
- Recolored image + invented color palette with auto-naming
- CLI + Streamlit app
- ✅ **Projection quality metrics**（Stress/Trustworthiness/Continuity/LCMC/Triplet）

## Quickstart
```bash
python -m venv .venv && source .venv/bin/activate   # Windows: .venv\Scripts\activate
pip install -r requirements.txt
python scripts/alien_palette.py --image flower.png --clusters 16 --latent-dim 384 --outdir outputs
```
you can change flower.png to other image file

## Evaluation（评估投影质量）
从图像直接评估：
```bash
python scripts/evaluate_projection.py --image flower.png --method pca --k 15 --triplets 50000 --out outputs/eval_metrics.json
```
或对已有高/低维表示评估：
```bash
python scripts/evaluate_projection.py --X_high X_high.npy --X_low X_low.npy --k 15
```

输出 JSON 指标：`stress`、`trustworthiness@k`、`continuity@k`、`lcmc@k`、`triplet_preservation`。

metrics
| 指标                     | 值（示例）    | 含义            | 理想方向 |
| ---------------------- | ----- | ------------- | ---- |
| `stress`               | 0.9770026206970215 | 距离保真度损失（应力）   | 越低越好 < 0.2 很好|
| `stress_weighted`      | 0.9770026206970215  | 重视近邻的应力       | 越低越好 |
| `trustworthiness@15`   | 0.931768314262121  | 低维的近邻是否真是高维近邻 | 越高越好 > 0.95 优秀|
| `continuity@15`        | 0.9587904525972238  | 高维近邻是否在低维也相邻  | 越高越好 > 0.95 优秀|
| `lcmc@15`              | 0.46933542647828336 | 邻域重合度（减去随机基线） | 越大越好 > 0 理想 > 0.1 很好|
| `triplet_preservation` | 0.8486109982942084  | 三元组相对距离排序保持率  | 越高越好 > 0.8 很强|


data visualization
streamlit run app_latentvision.py




